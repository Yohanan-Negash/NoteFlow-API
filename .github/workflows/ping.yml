name: Ping Health Check

# This workflow pings the health check endpoint every 12 minutes to keep the service alive
# and verify that it's functioning properly. It will fail if the endpoint returns a non-200 response.
on:
  schedule:
    - cron: '*/12 * * * *' # every 12 minutes

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping /up
        run: |
          status=$(curl -o /dev/null -s -w "%{http_code}\n" https://noteflow-api-jefi.onrender.com/up)
          if [ "$status" != "200" ]; then
            echo "Health check failed: HTTP $status"
            exit 1
          fi
